<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lecture 5: Completion Percentage Over Expectation – Special Topics: Sports Analytics 36-460/660</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-a6a01229d4f8bdf1dc707ca4bfce0e81.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">
      Special Topics: Sports Analytics 36-460/660
      </li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Special Topics: Sports Analytics 36-460/660</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/ryurko/cmu-sportsanalytics-spring25" title="GitHub" class="quarto-navigation-tool px-1" aria-label="GitHub"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lectures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lectures</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../demos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Demos</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#modeling-completion-probability-with-logistic-regression" id="toc-modeling-completion-probability-with-logistic-regression" class="nav-link" data-scroll-target="#modeling-completion-probability-with-logistic-regression">Modeling completion probability with logistic regression</a></li>
  <li><a href="#computing-cpoe-by-allocating-residuals" id="toc-computing-cpoe-by-allocating-residuals" class="nav-link" data-scroll-target="#computing-cpoe-by-allocating-residuals">Computing CPOE by allocating residuals</a></li>
  <li><a href="#estimating-coefficients-for-qbs" id="toc-estimating-coefficients-for-qbs" class="nav-link" data-scroll-target="#estimating-coefficients-for-qbs">Estimating coefficients for QBs</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lecture 5: Completion Percentage Over Expectation</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The goal of this demo is begin our build-up to understanding the importance of <strong>multilevel modeling</strong> in sports. We’ll do this in the context of modeling completion probability for pass attempts in the NFL based on games during the 2023 and 2024 regular seasons. The dataset and code used to initialize it (<code>init_nfl_passing_data.R</code>) are available on Canvas.</p>
<p>The following code chunk reads in the relevant dataset (assuming it is in the correct directory) of passing plays:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>nfl_passing_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/nfl_passing_data.csv"</span>))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>nfl_passing_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 35,987 × 17
   game_id         play_id drive posteam defteam posteam_type passer_name_id    
   &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;             
 1 2023_01_ARI_WAS      77     1 WAS     ARI     home         S.Howell_00-00370…
 2 2023_01_ARI_WAS     124     1 WAS     ARI     home         S.Howell_00-00370…
 3 2023_01_ARI_WAS     147     1 WAS     ARI     home         S.Howell_00-00370…
 4 2023_01_ARI_WAS     172     1 WAS     ARI     home         S.Howell_00-00370…
 5 2023_01_ARI_WAS     197     1 WAS     ARI     home         S.Howell_00-00370…
 6 2023_01_ARI_WAS     220     1 WAS     ARI     home         S.Howell_00-00370…
 7 2023_01_ARI_WAS     332     2 ARI     WAS     away         J.Dobbs_00-0033949
 8 2023_01_ARI_WAS     357     2 ARI     WAS     away         J.Dobbs_00-0033949
 9 2023_01_ARI_WAS     380     2 ARI     WAS     away         J.Dobbs_00-0033949
10 2023_01_ARI_WAS     526     3 WAS     ARI     home         S.Howell_00-00370…
# ℹ 35,977 more rows
# ℹ 10 more variables: receiver_name_id &lt;chr&gt;, complete_pass &lt;dbl&gt;,
#   pass_location &lt;chr&gt;, air_yards &lt;dbl&gt;, qb_hit &lt;dbl&gt;, epa &lt;dbl&gt;,
#   yardline_100 &lt;dbl&gt;, down &lt;dbl&gt;, ydstogo &lt;dbl&gt;, is_home &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="modeling-completion-probability-with-logistic-regression" class="level2">
<h2 class="anchored" data-anchor-id="modeling-completion-probability-with-logistic-regression">Modeling completion probability with logistic regression</h2>
<p>Similar to how we modeled expected goals in hockey, we will use a logistic regression model to estimate the probability of a complete pass (i.e., when <code>complete_pass</code> equals 1) based on a few variables:</p>
<ol type="1">
<li><p><code>pass_location</code>: a categorical variable denoting which side of the field the ball was thrown to, either <code>left</code>, <code>middle</code>, or <code>right</code> (based on manually charted data). We’re going to be lazy and treat <code>left</code> as the reference level, but one should think more carefully about which level is more appropriate.</p></li>
<li><p><code>air_yards</code>: a quantitative variable indicating how many yards the ball traveled in the air <em>perpendicular</em> to the line of scrimmage. This does not measure the actual distance traveled by the ball (e.g., if the QB throws the ball across the field but only to the line of scrimmage then it has air yards of 0), but still provides measure for the length of the pass.</p></li>
<li><p><code>qb_hit</code>: a binary indicator variable denoting whether or not the QB was hit on the play, serving as a proxy for plays where the QB observes pressure (i.e., a tougher situation to make a throw).</p></li>
</ol>
<p>The following code chunk fits the logistic regression model on all of the data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>logit_completion <span class="ot">&lt;-</span> <span class="fu">glm</span>(complete_pass <span class="sc">~</span> pass_location <span class="sc">+</span> air_yards <span class="sc">+</span> qb_hit,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">data =</span> nfl_passing_data, <span class="at">family =</span> <span class="st">"binomial"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(logit_completion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = complete_pass ~ pass_location + air_yards + qb_hit, 
    family = "binomial", data = nfl_passing_data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.1567  -1.1713   0.7187   0.8481   2.3971  

Coefficients:
                     Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)          1.221994   0.021886  55.834  &lt; 2e-16 ***
pass_locationmiddle  0.164057   0.032141   5.104 3.32e-07 ***
pass_locationright  -0.090248   0.026235  -3.440 0.000582 ***
air_yards           -0.058879   0.001203 -48.957  &lt; 2e-16 ***
qb_hit              -1.080257   0.038836 -27.816  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 46543  on 35986  degrees of freedom
Residual deviance: 42900  on 35982  degrees of freedom
AIC: 42910

Number of Fisher Scoring iterations: 4</code></pre>
</div>
</div>
<p><strong>EXERCISE: How should we evaluate this model? Perform the appropriate type of evaluation on your own time. Are there any variables that be adjusted in some way? Are there are any other variables in the dataset that we should account for?</strong></p>
</section>
<section id="computing-cpoe-by-allocating-residuals" class="level2">
<h2 class="anchored" data-anchor-id="computing-cpoe-by-allocating-residuals">Computing CPOE by allocating residuals</h2>
<p>As discussed in lecture, <strong>completion percentage over expectation (CPOE)</strong> is a very popular statistic in football analytics that is commonly used for measuring QB performance. The idea behind the stat is very simple: for every pass attempt we can compute the residual between the pass outcome (1 for completion, 0 for incomplete) and the estimated completion probability based on our model. We can then accumulate and average over these residuals to compute CPOE, representing how many more completions are observed than expected on average. For <span class="math inline">\(n\)</span> pass attempts, the CPOE is:</p>
<p><span class="math display">\[
CPOE = \frac{1}{n} \sum_i^n (Outcome_i - \widehat{Pr}(Outcome_i | X_i))
\]</span> where <span class="math inline">\(Outcome_i\)</span> is 1 for complete and 0 for incomplete or an interception.</p>
<p>The following code chunk performs this calculation for every passer in the dataset, along with computing the observed number of completions and completion percentage, as well as the sum and average of the completion probability estimates to get the expected number of completions and expected completion percentage respectively.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First add the predicted probabilities to the dataset:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>nfl_passing_data <span class="ot">&lt;-</span> nfl_passing_data <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">comp_prob =</span> logit_completion<span class="sc">$</span>fitted.values,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>         <span class="co"># Compute the residual:</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">comp_resid =</span> complete_pass <span class="sc">-</span> comp_prob)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Now create the QB summary table:</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>qb_summary <span class="ot">&lt;-</span> nfl_passing_data <span class="sc">|&gt;</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(passer_name_id) <span class="sc">|&gt;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n_pass =</span> <span class="fu">n</span>(),</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">comps =</span> <span class="fu">sum</span>(complete_pass),</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">comp_perc =</span> <span class="fu">mean</span>(complete_pass),</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">ex_comps =</span> <span class="fu">sum</span>(comp_prob),</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">ex_comp_perc =</span> <span class="fu">mean</span>(comp_prob),</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">cpoe =</span> <span class="fu">mean</span>(comp_resid),</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>qb_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 141 × 7
   passer_name_id          n_pass comps comp_perc ex_comps ex_comp_perc    cpoe
   &lt;chr&gt;                    &lt;int&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;        &lt;dbl&gt;   &lt;dbl&gt;
 1 A.Cole_00-0035190            1     1     1        0.710        0.710  0.290 
 2 A.Dalton_00-0027973        218   140     0.642  144.           0.661 -0.0187
 3 A.Lazard_00-0034521          1     0     0        0.533        0.533 -0.533 
 4 A.McCarron_00-0031288        5     4     0.8      3.93         0.786  0.0136
 5 A.Mitchell_00-0039890        1     1     1        0.829        0.829  0.171 
 6 A.O'Connell_00-0038579     584   367     0.628  383.           0.656 -0.0277
 7 A.Richardson_00-0039164    346   176     0.509  209.           0.603 -0.0944
 8 A.Rodgers_00-0023459       585   368     0.629  388.           0.663 -0.0334
 9 A.St. Brown_00-0036963       1     1     1        0.717        0.717  0.283 
10 B.Allen_00-0032434          30    17     0.567   19.7          0.657 -0.0905
# ℹ 131 more rows</code></pre>
</div>
</div>
<p>We can create a custom table with the top 10 QBs in terms of CPOE (with a minimum of 200 passing attempts) using the <a href="https://gt.rstudio.com/"><code>gt</code></a> package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'gt' was built under R version 4.2.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>qb_summary <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_pass <span class="sc">&gt;=</span> <span class="dv">200</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sort by CPOE in descending order:</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(cpoe)) <span class="sc">|&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Only grab the top 10 QBs:</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Round the various stats and multiple the %s by 100 for display reasons</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">comp_perc =</span> <span class="fu">round</span>(comp_perc <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">ex_comps =</span> <span class="fu">round</span>(ex_comps, <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">ex_comp_perc =</span> <span class="fu">round</span>(ex_comp_perc <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">cpoe =</span> <span class="fu">round</span>(cpoe <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">4</span>)) <span class="sc">|&gt;</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rename the columns for display purposes:</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">`</span><span class="at">QB_ID</span><span class="st">`</span> <span class="ot">=</span> passer_name_id,</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at"># Passes</span><span class="st">`</span> <span class="ot">=</span> n_pass,</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at"># Comps</span><span class="st">`</span> <span class="ot">=</span> comps,</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Comp %</span><span class="st">`</span> <span class="ot">=</span> comp_perc,</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Exp # Comps</span><span class="st">`</span> <span class="ot">=</span> ex_comps,</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Exp Comp %</span><span class="st">`</span> <span class="ot">=</span> ex_comp_perc,</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">CPOE</span><span class="st">`</span> <span class="ot">=</span> cpoe) <span class="sc">|&gt;</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Top 10 QBs based on CPOE (minimum of 200 pass attempts)"</span>,</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="st">"Based on 2023-2024 regular season games accessed using nflreadr"</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">list</span>(</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cell_borders</span>(</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">sides =</span> <span class="st">"right"</span>,</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">weight =</span> <span class="fu">px</span>(<span class="dv">3</span>)</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Where to place the thick border</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">list</span>(</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cells_body</span>(</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at"># Passes</span><span class="st">`</span>)</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Which variables to color by</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data_color</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">Comp %</span><span class="st">`</span>,</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>                         <span class="st">`</span><span class="at">Exp Comp %</span><span class="st">`</span>,</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>                         <span class="st">`</span><span class="at">CPOE</span><span class="st">`</span>),</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>             <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">col_numeric</span>(</span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>               <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">"darkblue"</span>, <span class="st">"darkorange"</span>),</span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>               <span class="at">domain =</span> <span class="cn">NULL</span></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>             ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Since gt v0.9.0, the `colors` argument has been deprecated.
• Please use the `fn` argument instead.
This warning is displayed once every 8 hours.</code></pre>
</div>
<div class="cell-output-display">
<div id="pzuzswxccw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#pzuzswxccw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#pzuzswxccw thead, #pzuzswxccw tbody, #pzuzswxccw tfoot, #pzuzswxccw tr, #pzuzswxccw td, #pzuzswxccw th {
  border-style: none;
}

#pzuzswxccw p {
  margin: 0;
  padding: 0;
}

#pzuzswxccw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#pzuzswxccw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#pzuzswxccw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#pzuzswxccw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#pzuzswxccw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pzuzswxccw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pzuzswxccw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pzuzswxccw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#pzuzswxccw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#pzuzswxccw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#pzuzswxccw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#pzuzswxccw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#pzuzswxccw .gt_spanner_row {
  border-bottom-style: hidden;
}

#pzuzswxccw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#pzuzswxccw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#pzuzswxccw .gt_from_md > :first-child {
  margin-top: 0;
}

#pzuzswxccw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#pzuzswxccw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#pzuzswxccw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#pzuzswxccw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#pzuzswxccw .gt_row_group_first td {
  border-top-width: 2px;
}

#pzuzswxccw .gt_row_group_first th {
  border-top-width: 2px;
}

#pzuzswxccw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pzuzswxccw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#pzuzswxccw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#pzuzswxccw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pzuzswxccw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pzuzswxccw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#pzuzswxccw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#pzuzswxccw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#pzuzswxccw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pzuzswxccw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pzuzswxccw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pzuzswxccw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pzuzswxccw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pzuzswxccw .gt_left {
  text-align: left;
}

#pzuzswxccw .gt_center {
  text-align: center;
}

#pzuzswxccw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#pzuzswxccw .gt_font_normal {
  font-weight: normal;
}

#pzuzswxccw .gt_font_bold {
  font-weight: bold;
}

#pzuzswxccw .gt_font_italic {
  font-style: italic;
}

#pzuzswxccw .gt_super {
  font-size: 65%;
}

#pzuzswxccw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#pzuzswxccw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#pzuzswxccw .gt_indent_1 {
  text-indent: 5px;
}

#pzuzswxccw .gt_indent_2 {
  text-indent: 10px;
}

#pzuzswxccw .gt_indent_3 {
  text-indent: 15px;
}

#pzuzswxccw .gt_indent_4 {
  text-indent: 20px;
}

#pzuzswxccw .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="7" class="gt_heading gt_title gt_font_normal">Top 10 QBs based on CPOE (minimum of 200 pass attempts)</th>
</tr>
<tr class="gt_heading even">
<th colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Based on 2023-2024 regular season games accessed using nflreadr</th>
</tr>
<tr class="gt_col_headings header">
<th id="QB_ID" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">QB_ID</th>
<th id="# Passes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col"># Passes</th>
<th id="# Comps" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col"># Comps</th>
<th id="Comp %" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Comp %</th>
<th id="Exp # Comps" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Exp # Comps</th>
<th id="Exp Comp %" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Exp Comp %</th>
<th id="CPOE" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">CPOE</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="QB_ID">J.Browning_00-0035100</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">243</td>
<td class="gt_row gt_right" headers="# Comps">171</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #DD6E3B; color: #FFFFFF">70.3704</td>
<td class="gt_row gt_right" headers="Exp # Comps">161.6712</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #C3594E; color: #FFFFFF">66.5313</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #FF8C00; color: #000000">3.8390</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="QB_ID">K.Cousins_00-0029604</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">758</td>
<td class="gt_row gt_right" headers="# Comps">519</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #7A2572; color: #FFFFFF">68.4697</td>
<td class="gt_row gt_right" headers="Exp # Comps">490.1913</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #0D008A; color: #FFFFFF">64.6690</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #F98714; color: #000000">3.8006</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="QB_ID">J.Burrow_00-0036442</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1014</td>
<td class="gt_row gt_right" headers="# Comps">704</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #AF495A; color: #FFFFFF">69.4280</td>
<td class="gt_row gt_right" headers="Exp # Comps">666.7347</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #8E316A; color: #FFFFFF">65.7529</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #E77830; color: #FFFFFF">3.6751</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="QB_ID">J.Goff_00-0033106</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1137</td>
<td class="gt_row gt_right" headers="# Comps">797</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #CF6345; color: #FFFFFF">70.0967</td>
<td class="gt_row gt_right" headers="Exp # Comps">755.9979</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #C05750; color: #FFFFFF">66.4906</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #DD6F3A; color: #FFFFFF">3.6062</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="QB_ID">T.Tagovailoa_00-0036212</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">955</td>
<td class="gt_row gt_right" headers="# Comps">679</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #FF8C00; color: #000000">71.0995</td>
<td class="gt_row gt_right" headers="Exp # Comps">644.5809</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #FF8C00; color: #000000">67.4954</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #DD6F3A; color: #FFFFFF">3.6041</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="QB_ID">B.Purdy_00-0037834</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">891</td>
<td class="gt_row gt_right" headers="# Comps">608</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #6C1C77; color: #FFFFFF">68.2379</td>
<td class="gt_row gt_right" headers="Exp # Comps">576.0082</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #00008B; color: #FFFFFF">64.6474</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #DB6D3C; color: #FFFFFF">3.5905</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="QB_ID">D.Prescott_00-0033077</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">874</td>
<td class="gt_row gt_right" headers="# Comps">595</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #61167B; color: #FFFFFF">68.0778</td>
<td class="gt_row gt_right" headers="Exp # Comps">568.9769</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #57117E; color: #FFFFFF">65.1003</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #7A2472; color: #FFFFFF">2.9775</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="QB_ID">D.Carr_00-0031280</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">827</td>
<td class="gt_row gt_right" headers="# Comps">564</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #691A78; color: #FFFFFF">68.1983</td>
<td class="gt_row gt_right" headers="Exp # Comps">541.8996</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #7D2671; color: #FFFFFF">65.5259</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #2E0387; color: #FFFFFF">2.6724</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="QB_ID">J.Daniels_00-0039910</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">478</td>
<td class="gt_row gt_right" headers="# Comps">331</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #A5425F; color: #FFFFFF">69.2469</td>
<td class="gt_row gt_right" headers="Exp # Comps">318.3892</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #C75D4B; color: #FFFFFF">66.6086</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #1C0189; color: #FFFFFF">2.6382</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="QB_ID">L.Jackson_00-0034796</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">925</td>
<td class="gt_row gt_right" headers="# Comps">623</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #00008B; color: #FFFFFF">67.3514</td>
<td class="gt_row gt_right" headers="Exp # Comps">598.8349</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #240188; color: #FFFFFF">64.7389</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #00008B; color: #FFFFFF">2.6124</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>But this table only displays the QB rankings. We can do the same for receivers, from the view point of catches over expectation:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>rec_summary <span class="ot">&lt;-</span> nfl_passing_data <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(receiver_name_id) <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n_pass =</span> <span class="fu">n</span>(),</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">n_rec =</span> <span class="fu">sum</span>(complete_pass),</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">catch_perc =</span> <span class="fu">mean</span>(complete_pass),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">ex_rec =</span> <span class="fu">sum</span>(comp_prob),</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">ex_catch_perc =</span> <span class="fu">mean</span>(comp_prob),</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">cpoe =</span> <span class="fu">mean</span>(comp_resid),</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>rec_summary <span class="sc">|&gt;</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_pass <span class="sc">&gt;=</span> <span class="dv">50</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sort by CPOE in descending order:</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(cpoe)) <span class="sc">|&gt;</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Only grab the top 10 QBs:</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Round the various stats and multiple the %s by 100 for display reasons</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">catch_perc =</span> <span class="fu">round</span>(catch_perc <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">ex_rec =</span> <span class="fu">round</span>(ex_rec, <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">ex_catch_perc =</span> <span class="fu">round</span>(ex_catch_perc <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">cpoe =</span> <span class="fu">round</span>(cpoe <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">4</span>)) <span class="sc">|&gt;</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rename the columns for display purposes:</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">`</span><span class="at">Receiver_ID</span><span class="st">`</span> <span class="ot">=</span> receiver_name_id,</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at"># Targets</span><span class="st">`</span> <span class="ot">=</span> n_pass,</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at"># Catches</span><span class="st">`</span> <span class="ot">=</span> n_rec,</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Catch %</span><span class="st">`</span> <span class="ot">=</span> catch_perc,</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Exp # Catches</span><span class="st">`</span> <span class="ot">=</span> ex_rec,</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Exp Catch %</span><span class="st">`</span> <span class="ot">=</span> ex_catch_perc,</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">CPOE</span><span class="st">`</span> <span class="ot">=</span> cpoe) <span class="sc">|&gt;</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Top 10 receivers based on CPOE (minimum of 50 targets)"</span>,</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="st">"Based on 2023-2024 regular season games accessed using nflreadr"</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">list</span>(</span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cell_borders</span>(</span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">sides =</span> <span class="st">"right"</span>,</span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">weight =</span> <span class="fu">px</span>(<span class="dv">3</span>)</span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Where to place the thick border</span></span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">list</span>(</span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cells_body</span>(</span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at"># Targets</span><span class="st">`</span>)</span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Which variables to color by</span></span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data_color</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">Catch %</span><span class="st">`</span>,</span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a>                         <span class="st">`</span><span class="at">Exp Catch %</span><span class="st">`</span>,</span>
<span id="cb11-51"><a href="#cb11-51" aria-hidden="true" tabindex="-1"></a>                         <span class="st">`</span><span class="at">CPOE</span><span class="st">`</span>),</span>
<span id="cb11-52"><a href="#cb11-52" aria-hidden="true" tabindex="-1"></a>             <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">col_numeric</span>(</span>
<span id="cb11-53"><a href="#cb11-53" aria-hidden="true" tabindex="-1"></a>               <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">"darkblue"</span>, <span class="st">"darkorange"</span>),</span>
<span id="cb11-54"><a href="#cb11-54" aria-hidden="true" tabindex="-1"></a>               <span class="at">domain =</span> <span class="cn">NULL</span></span>
<span id="cb11-55"><a href="#cb11-55" aria-hidden="true" tabindex="-1"></a>             ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="rpozwrutyb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rpozwrutyb table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rpozwrutyb thead, #rpozwrutyb tbody, #rpozwrutyb tfoot, #rpozwrutyb tr, #rpozwrutyb td, #rpozwrutyb th {
  border-style: none;
}

#rpozwrutyb p {
  margin: 0;
  padding: 0;
}

#rpozwrutyb .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rpozwrutyb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rpozwrutyb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rpozwrutyb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rpozwrutyb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rpozwrutyb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rpozwrutyb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rpozwrutyb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rpozwrutyb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rpozwrutyb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rpozwrutyb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rpozwrutyb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rpozwrutyb .gt_spanner_row {
  border-bottom-style: hidden;
}

#rpozwrutyb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rpozwrutyb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rpozwrutyb .gt_from_md > :first-child {
  margin-top: 0;
}

#rpozwrutyb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rpozwrutyb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rpozwrutyb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rpozwrutyb .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rpozwrutyb .gt_row_group_first td {
  border-top-width: 2px;
}

#rpozwrutyb .gt_row_group_first th {
  border-top-width: 2px;
}

#rpozwrutyb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rpozwrutyb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rpozwrutyb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rpozwrutyb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rpozwrutyb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rpozwrutyb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rpozwrutyb .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rpozwrutyb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rpozwrutyb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rpozwrutyb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rpozwrutyb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rpozwrutyb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rpozwrutyb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rpozwrutyb .gt_left {
  text-align: left;
}

#rpozwrutyb .gt_center {
  text-align: center;
}

#rpozwrutyb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rpozwrutyb .gt_font_normal {
  font-weight: normal;
}

#rpozwrutyb .gt_font_bold {
  font-weight: bold;
}

#rpozwrutyb .gt_font_italic {
  font-style: italic;
}

#rpozwrutyb .gt_super {
  font-size: 65%;
}

#rpozwrutyb .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rpozwrutyb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rpozwrutyb .gt_indent_1 {
  text-indent: 5px;
}

#rpozwrutyb .gt_indent_2 {
  text-indent: 10px;
}

#rpozwrutyb .gt_indent_3 {
  text-indent: 15px;
}

#rpozwrutyb .gt_indent_4 {
  text-indent: 20px;
}

#rpozwrutyb .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="7" class="gt_heading gt_title gt_font_normal">Top 10 receivers based on CPOE (minimum of 50 targets)</th>
</tr>
<tr class="gt_heading even">
<th colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Based on 2023-2024 regular season games accessed using nflreadr</th>
</tr>
<tr class="gt_col_headings header">
<th id="Receiver_ID" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Receiver_ID</th>
<th id="# Targets" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col"># Targets</th>
<th id="# Catches" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col"># Catches</th>
<th id="Catch %" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Catch %</th>
<th id="Exp # Catches" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Exp # Catches</th>
<th id="Exp Catch %" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Exp Catch %</th>
<th id="CPOE" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">CPOE</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Receiver_ID">C.Kmet_00-0036290</td>
<td class="gt_row gt_right" headers="# Targets" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">145</td>
<td class="gt_row gt_right" headers="# Catches">120</td>
<td class="gt_row gt_right" headers="Catch %" style="background-color: #AE495A; color: #FFFFFF">82.7586</td>
<td class="gt_row gt_right" headers="Exp # Catches">98.0541</td>
<td class="gt_row gt_right" headers="Exp Catch %" style="background-color: #923468; color: #FFFFFF">67.6235</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #FF8C00; color: #000000">15.1351</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Receiver_ID">K.Raymond_00-0032464</td>
<td class="gt_row gt_right" headers="# Targets" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">66</td>
<td class="gt_row gt_right" headers="# Catches">52</td>
<td class="gt_row gt_right" headers="Catch %" style="background-color: #802870; color: #FFFFFF">78.7879</td>
<td class="gt_row gt_right" headers="Exp # Catches">42.2940</td>
<td class="gt_row gt_right" headers="Exp Catch %" style="background-color: #5B137D; color: #FFFFFF">64.0818</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #EA7A2D; color: #FFFFFF">14.7061</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Receiver_ID">R.White_00-0037256</td>
<td class="gt_row gt_right" headers="# Targets" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">127</td>
<td class="gt_row gt_right" headers="# Catches">115</td>
<td class="gt_row gt_right" headers="Catch %" style="background-color: #FF8C00; color: #000000">90.5512</td>
<td class="gt_row gt_right" headers="Exp # Catches">97.1515</td>
<td class="gt_row gt_right" headers="Exp Catch %" style="background-color: #FF8C00; color: #000000">76.4973</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #CB6049; color: #FFFFFF">14.0539</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Receiver_ID">G.Kittle_00-0033288</td>
<td class="gt_row gt_right" headers="# Targets" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">184</td>
<td class="gt_row gt_right" headers="# Catches">143</td>
<td class="gt_row gt_right" headers="Catch %" style="background-color: #721F75; color: #FFFFFF">77.7174</td>
<td class="gt_row gt_right" headers="Exp # Catches">118.9066</td>
<td class="gt_row gt_right" headers="Exp Catch %" style="background-color: #65187A; color: #FFFFFF">64.6232</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #993965; color: #FFFFFF">13.0942</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Receiver_ID">D.Smith_00-0036912</td>
<td class="gt_row gt_right" headers="# Targets" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">201</td>
<td class="gt_row gt_right" headers="# Catches">149</td>
<td class="gt_row gt_right" headers="Catch %" style="background-color: #300387; color: #FFFFFF">74.1294</td>
<td class="gt_row gt_right" headers="Exp # Catches">124.9528</td>
<td class="gt_row gt_right" headers="Exp Catch %" style="background-color: #2C0287; color: #FFFFFF">62.1656</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #510D80; color: #FFFFFF">11.9638</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Receiver_ID">L.McConkey_00-0039915</td>
<td class="gt_row gt_right" headers="# Targets" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">112</td>
<td class="gt_row gt_right" headers="# Catches">82</td>
<td class="gt_row gt_right" headers="Catch %" style="background-color: #00008B; color: #FFFFFF">73.2143</td>
<td class="gt_row gt_right" headers="Exp # Catches">68.8615</td>
<td class="gt_row gt_right" headers="Exp Catch %" style="background-color: #00008B; color: #FFFFFF">61.4835</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #3A0585; color: #FFFFFF">11.7308</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Receiver_ID">K.Shakir_00-0037261</td>
<td class="gt_row gt_right" headers="# Targets" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">145</td>
<td class="gt_row gt_right" headers="# Catches">115</td>
<td class="gt_row gt_right" headers="Catch %" style="background-color: #862C6D; color: #FFFFFF">79.3103</td>
<td class="gt_row gt_right" headers="Exp # Catches">98.0211</td>
<td class="gt_row gt_right" headers="Exp Catch %" style="background-color: #923468; color: #FFFFFF">67.6007</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #370485; color: #FFFFFF">11.7096</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Receiver_ID">S.Perine_00-0033526</td>
<td class="gt_row gt_right" headers="# Targets" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">91</td>
<td class="gt_row gt_right" headers="# Catches">78</td>
<td class="gt_row gt_right" headers="Catch %" style="background-color: #CD6247; color: #FFFFFF">85.7143</td>
<td class="gt_row gt_right" headers="Exp # Catches">67.4318</td>
<td class="gt_row gt_right" headers="Exp Catch %" style="background-color: #E37435; color: #FFFFFF">74.1009</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #2A0288; color: #FFFFFF">11.6134</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Receiver_ID">M.Andrews_00-0034753</td>
<td class="gt_row gt_right" headers="# Targets" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">130</td>
<td class="gt_row gt_right" headers="# Catches">100</td>
<td class="gt_row gt_right" headers="Catch %" style="background-color: #661979; color: #FFFFFF">76.9231</td>
<td class="gt_row gt_right" headers="Exp # Catches">84.9763</td>
<td class="gt_row gt_right" headers="Exp Catch %" style="background-color: #711F75; color: #FFFFFF">65.3664</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #200189; color: #FFFFFF">11.5567</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Receiver_ID">A.Thielen_00-0030035</td>
<td class="gt_row gt_right" headers="# Targets" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">199</td>
<td class="gt_row gt_right" headers="# Catches">151</td>
<td class="gt_row gt_right" headers="Catch %" style="background-color: #56107E; color: #FFFFFF">75.8794</td>
<td class="gt_row gt_right" headers="Exp # Catches">128.1946</td>
<td class="gt_row gt_right" headers="Exp Catch %" style="background-color: #61167B; color: #FFFFFF">64.4194</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #00008B; color: #FFFFFF">11.4600</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>And again for opposing defenses:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>def_summary <span class="ot">&lt;-</span> nfl_passing_data <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(defteam) <span class="sc">|&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n_pass =</span> <span class="fu">n</span>(),</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">comps =</span> <span class="fu">sum</span>(complete_pass),</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">comp_perc =</span> <span class="fu">mean</span>(complete_pass),</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">ex_comps =</span> <span class="fu">sum</span>(comp_prob),</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">ex_comp_perc =</span> <span class="fu">mean</span>(comp_prob),</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">cpoe =</span> <span class="fu">mean</span>(comp_resid),</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>def_summary <span class="sc">|&gt;</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sort by CPOE in ascending order:</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(cpoe) <span class="sc">|&gt;</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Round the various stats and multiple the %s by 100 for display reasons</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">comp_perc =</span> <span class="fu">round</span>(comp_perc <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">ex_comps =</span> <span class="fu">round</span>(ex_comps, <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">ex_comp_perc =</span> <span class="fu">round</span>(ex_comp_perc <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">cpoe =</span> <span class="fu">round</span>(cpoe <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">4</span>)) <span class="sc">|&gt;</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rename the columns for display purposes:</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">`</span><span class="at">Team</span><span class="st">`</span> <span class="ot">=</span> defteam,</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at"># Passes</span><span class="st">`</span> <span class="ot">=</span> n_pass,</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at"># Comps</span><span class="st">`</span> <span class="ot">=</span> comps,</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Comp %</span><span class="st">`</span> <span class="ot">=</span> comp_perc,</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Exp # Comps</span><span class="st">`</span> <span class="ot">=</span> ex_comps,</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Exp Comp %</span><span class="st">`</span> <span class="ot">=</span> ex_comp_perc,</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">CPOE</span><span class="st">`</span> <span class="ot">=</span> cpoe) <span class="sc">|&gt;</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Team defenses ranked based on CPOE"</span>,</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="st">"Based on 2023-2024 regular season games accessed using nflreadr"</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">list</span>(</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cell_borders</span>(</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">sides =</span> <span class="st">"right"</span>,</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">weight =</span> <span class="fu">px</span>(<span class="dv">3</span>)</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Where to place the thick border</span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">list</span>(</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cells_body</span>(</span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at"># Passes</span><span class="st">`</span>)</span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Which variables to color by</span></span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data_color</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">Comp %</span><span class="st">`</span>,</span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>                         <span class="st">`</span><span class="at">Exp Comp %</span><span class="st">`</span>,</span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>                         <span class="st">`</span><span class="at">CPOE</span><span class="st">`</span>),</span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>             <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">col_numeric</span>(</span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a>               <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">"darkblue"</span>, <span class="st">"darkorange"</span>),</span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>               <span class="at">domain =</span> <span class="cn">NULL</span></span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>             ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="arhxemctcz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#arhxemctcz table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#arhxemctcz thead, #arhxemctcz tbody, #arhxemctcz tfoot, #arhxemctcz tr, #arhxemctcz td, #arhxemctcz th {
  border-style: none;
}

#arhxemctcz p {
  margin: 0;
  padding: 0;
}

#arhxemctcz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#arhxemctcz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#arhxemctcz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#arhxemctcz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#arhxemctcz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#arhxemctcz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#arhxemctcz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#arhxemctcz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#arhxemctcz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#arhxemctcz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#arhxemctcz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#arhxemctcz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#arhxemctcz .gt_spanner_row {
  border-bottom-style: hidden;
}

#arhxemctcz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#arhxemctcz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#arhxemctcz .gt_from_md > :first-child {
  margin-top: 0;
}

#arhxemctcz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#arhxemctcz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#arhxemctcz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#arhxemctcz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#arhxemctcz .gt_row_group_first td {
  border-top-width: 2px;
}

#arhxemctcz .gt_row_group_first th {
  border-top-width: 2px;
}

#arhxemctcz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#arhxemctcz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#arhxemctcz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#arhxemctcz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#arhxemctcz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#arhxemctcz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#arhxemctcz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#arhxemctcz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#arhxemctcz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#arhxemctcz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#arhxemctcz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#arhxemctcz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#arhxemctcz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#arhxemctcz .gt_left {
  text-align: left;
}

#arhxemctcz .gt_center {
  text-align: center;
}

#arhxemctcz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#arhxemctcz .gt_font_normal {
  font-weight: normal;
}

#arhxemctcz .gt_font_bold {
  font-weight: bold;
}

#arhxemctcz .gt_font_italic {
  font-style: italic;
}

#arhxemctcz .gt_super {
  font-size: 65%;
}

#arhxemctcz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#arhxemctcz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#arhxemctcz .gt_indent_1 {
  text-indent: 5px;
}

#arhxemctcz .gt_indent_2 {
  text-indent: 10px;
}

#arhxemctcz .gt_indent_3 {
  text-indent: 15px;
}

#arhxemctcz .gt_indent_4 {
  text-indent: 20px;
}

#arhxemctcz .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="7" class="gt_heading gt_title gt_font_normal">Team defenses ranked based on CPOE</th>
</tr>
<tr class="gt_heading even">
<th colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Based on 2023-2024 regular season games accessed using nflreadr</th>
</tr>
<tr class="gt_col_headings header">
<th id="Team" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Team</th>
<th id="# Passes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col"># Passes</th>
<th id="# Comps" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col"># Comps</th>
<th id="Comp %" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Comp %</th>
<th id="Exp # Comps" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Exp # Comps</th>
<th id="Exp Comp %" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Exp Comp %</th>
<th id="CPOE" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">CPOE</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Team">NO</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1145</td>
<td class="gt_row gt_right" headers="# Comps">699</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #4D0C81; color: #FFFFFF">61.0480</td>
<td class="gt_row gt_right" headers="Exp # Comps">741.1526</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #9B3B64; color: #FFFFFF">64.7295</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #00008B; color: #FFFFFF">-3.6814</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Team">CLE</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1040</td>
<td class="gt_row gt_right" headers="# Comps">623</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #00008B; color: #FFFFFF">59.9038</td>
<td class="gt_row gt_right" headers="Exp # Comps">659.3903</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #4D0C81; color: #FFFFFF">63.4029</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #220189; color: #FFFFFF">-3.4991</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Team">NYJ</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1039</td>
<td class="gt_row gt_right" headers="# Comps">640</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #5F157C; color: #FFFFFF">61.5977</td>
<td class="gt_row gt_right" headers="Exp # Comps">675.6156</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #A9455D; color: #FFFFFF">65.0256</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #290288; color: #FFFFFF">-3.4279</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Team">BAL</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1257</td>
<td class="gt_row gt_right" headers="# Comps">780</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #6C1C77; color: #FFFFFF">62.0525</td>
<td class="gt_row gt_right" headers="Exp # Comps">814.9431</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #A03E61; color: #FFFFFF">64.8324</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #520E7F; color: #FFFFFF">-2.7799</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Team">PIT</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1148</td>
<td class="gt_row gt_right" headers="# Comps">730</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #913469; color: #FFFFFF">63.5889</td>
<td class="gt_row gt_right" headers="Exp # Comps">748.4911</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #B24C58; color: #FFFFFF">65.1996</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #802870; color: #FFFFFF">-1.6107</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Team">LA</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1141</td>
<td class="gt_row gt_right" headers="# Comps">721</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #882D6D; color: #FFFFFF">63.1902</td>
<td class="gt_row gt_right" headers="Exp # Comps">736.0505</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #903369; color: #FFFFFF">64.5092</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #8A2E6C; color: #FFFFFF">-1.3191</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Team">PHI</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1189</td>
<td class="gt_row gt_right" headers="# Comps">762</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #9C3C63; color: #FFFFFF">64.0875</td>
<td class="gt_row gt_right" headers="Exp # Comps">775.4755</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #B34C58; color: #FFFFFF">65.2208</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #903369; color: #FFFFFF">-1.1334</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Team">LAC</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1163</td>
<td class="gt_row gt_right" headers="# Comps">756</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #B04A59; color: #FFFFFF">65.0043</td>
<td class="gt_row gt_right" headers="Exp # Comps">763.7140</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #C75D4B; color: #FFFFFF">65.6676</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #9E3D62; color: #FFFFFF">-0.6633</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Team">DET</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1194</td>
<td class="gt_row gt_right" headers="# Comps">744</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #732075; color: #FFFFFF">62.3116</td>
<td class="gt_row gt_right" headers="Exp # Comps">750.9671</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #00008B; color: #FFFFFF">62.8951</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #A13F61; color: #FFFFFF">-0.5835</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Team">KC</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1119</td>
<td class="gt_row gt_right" headers="# Comps">715</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #983965; color: #FFFFFF">63.8963</td>
<td class="gt_row gt_right" headers="Exp # Comps">720.1965</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #892E6C; color: #FFFFFF">64.3607</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #A4425F; color: #FFFFFF">-0.4644</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Team">WAS</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1090</td>
<td class="gt_row gt_right" headers="# Comps">703</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #A5425F; color: #FFFFFF">64.4954</td>
<td class="gt_row gt_right" headers="Exp # Comps">707.7514</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #A5425F; color: #FFFFFF">64.9313</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #A5425F; color: #FFFFFF">-0.4359</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Team">LV</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1117</td>
<td class="gt_row gt_right" headers="# Comps">746</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #D46742; color: #FFFFFF">66.7860</td>
<td class="gt_row gt_right" headers="Exp # Comps">747.6657</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #FF8C00; color: #000000">66.9352</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #AE495A; color: #FFFFFF">-0.1491</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Team">HOU</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1118</td>
<td class="gt_row gt_right" headers="# Comps">708</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #8B306B; color: #FFFFFF">63.3274</td>
<td class="gt_row gt_right" headers="Exp # Comps">709.6572</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #530E7F; color: #FFFFFF">63.4756</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #AE495A; color: #FFFFFF">-0.1482</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Team">NE</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1105</td>
<td class="gt_row gt_right" headers="# Comps">716</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #AB475C; color: #FFFFFF">64.7964</td>
<td class="gt_row gt_right" headers="Exp # Comps">715.9658</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #9E3D62; color: #FFFFFF">64.7933</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #B24C58; color: #FFFFFF">0.0031</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Team">SEA</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1152</td>
<td class="gt_row gt_right" headers="# Comps">761</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #C55B4C; color: #FFFFFF">66.0590</td>
<td class="gt_row gt_right" headers="Exp # Comps">760.2891</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #D66940; color: #FFFFFF">65.9973</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #B44D57; color: #FFFFFF">0.0617</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Team">DAL</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1014</td>
<td class="gt_row gt_right" headers="# Comps">657</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #AB475C; color: #FFFFFF">64.7929</td>
<td class="gt_row gt_right" headers="Exp # Comps">655.2981</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #963766; color: #FFFFFF">64.6251</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #B75055; color: #FFFFFF">0.1678</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Team">CHI</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1119</td>
<td class="gt_row gt_right" headers="# Comps">735</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #BE5551; color: #FFFFFF">65.6836</td>
<td class="gt_row gt_right" headers="Exp # Comps">732.3731</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #BD5552; color: #FFFFFF">65.4489</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #B95154; color: #FFFFFF">0.2348</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Team">MIA</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1134</td>
<td class="gt_row gt_right" headers="# Comps">745</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #BE5551; color: #FFFFFF">65.6966</td>
<td class="gt_row gt_right" headers="Exp # Comps">740.9915</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #B85155; color: #FFFFFF">65.3432</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #BC5452; color: #FFFFFF">0.3535</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Team">NYG</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1082</td>
<td class="gt_row gt_right" headers="# Comps">720</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #CF6346; color: #FFFFFF">66.5434</td>
<td class="gt_row gt_right" headers="Exp # Comps">715.0393</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #DA6C3D; color: #FFFFFF">66.0850</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #BF5650; color: #FFFFFF">0.4585</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Team">CAR</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1008</td>
<td class="gt_row gt_right" headers="# Comps">669</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #CB6048; color: #FFFFFF">66.3690</td>
<td class="gt_row gt_right" headers="Exp # Comps">663.5180</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #CE6246; color: #FFFFFF">65.8252</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #C2584F; color: #FFFFFF">0.5439</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Team">SF</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1132</td>
<td class="gt_row gt_right" headers="# Comps">748</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #C65B4C; color: #FFFFFF">66.0777</td>
<td class="gt_row gt_right" headers="Exp # Comps">741.1312</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #BE5551; color: #FFFFFF">65.4710</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #C45A4D; color: #FFFFFF">0.6068</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Team">JAX</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1196</td>
<td class="gt_row gt_right" headers="# Comps">793</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #CA5F49; color: #FFFFFF">66.3043</td>
<td class="gt_row gt_right" headers="Exp # Comps">784.0176</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #C2584F; color: #FFFFFF">65.5533</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #C85D4B; color: #FFFFFF">0.7510</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Team">DEN</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1173</td>
<td class="gt_row gt_right" headers="# Comps">775</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #C55B4C; color: #FFFFFF">66.0699</td>
<td class="gt_row gt_right" headers="Exp # Comps">764.9314</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #B24C58; color: #FFFFFF">65.2115</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #CB6049; color: #FFFFFF">0.8584</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Team">ATL</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1124</td>
<td class="gt_row gt_right" headers="# Comps">744</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #C85D4B; color: #FFFFFF">66.1922</td>
<td class="gt_row gt_right" headers="Exp # Comps">731.5522</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #AC475B; color: #FFFFFF">65.0847</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #D26544; color: #FFFFFF">1.1075</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Team">GB</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1083</td>
<td class="gt_row gt_right" headers="# Comps">723</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #D36743; color: #FFFFFF">66.7590</td>
<td class="gt_row gt_right" headers="Exp # Comps">710.5881</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #C55B4D; color: #FFFFFF">65.6129</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #D36643; color: #FFFFFF">1.1461</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Team">BUF</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1124</td>
<td class="gt_row gt_right" headers="# Comps">759</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #E27336; color: #FFFFFF">67.5267</td>
<td class="gt_row gt_right" headers="Exp # Comps">742.8475</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #DA6C3D; color: #FFFFFF">66.0896</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #DB6D3C; color: #FFFFFF">1.4371</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Team">TEN</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1041</td>
<td class="gt_row gt_right" headers="# Comps">701</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #DF7039; color: #FFFFFF">67.3391</td>
<td class="gt_row gt_right" headers="Exp # Comps">684.8598</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #CC6147; color: #FFFFFF">65.7886</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #DE7039; color: #FFFFFF">1.5504</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Team">TB</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1235</td>
<td class="gt_row gt_right" headers="# Comps">822</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #CF6346; color: #FFFFFF">66.5587</td>
<td class="gt_row gt_right" headers="Exp # Comps">802.8306</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #A9455D; color: #FFFFFF">65.0065</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #DE7039; color: #FFFFFF">1.5522</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Team">CIN</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1124</td>
<td class="gt_row gt_right" headers="# Comps">736</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #B95254; color: #FFFFFF">65.4804</td>
<td class="gt_row gt_right" headers="Exp # Comps">718.5373</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #711E76; color: #FFFFFF">63.9268</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #DE7039; color: #FFFFFF">1.5536</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Team">IND</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1105</td>
<td class="gt_row gt_right" headers="# Comps">748</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #E57632; color: #FFFFFF">67.6923</td>
<td class="gt_row gt_right" headers="Exp # Comps">724.5386</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #C3594E; color: #FFFFFF">65.5691</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #EE7D28; color: #FFFFFF">2.1232</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Team">MIN</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1237</td>
<td class="gt_row gt_right" headers="# Comps">841</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #EB7B2C; color: #FFFFFF">67.9871</td>
<td class="gt_row gt_right" headers="Exp # Comps">808.1054</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #B85055; color: #FFFFFF">65.3278</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #FD8A09; color: #000000">2.6592</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Team">ARI</td>
<td class="gt_row gt_right" headers="# Passes" style="border-right-width: 3px; border-right-style: solid; border-right-color: black">1039</td>
<td class="gt_row gt_right" headers="# Comps">717</td>
<td class="gt_row gt_right" headers="Comp %" style="background-color: #FF8C00; color: #000000">69.0087</td>
<td class="gt_row gt_right" headers="Exp # Comps">688.5146</td>
<td class="gt_row gt_right" headers="Exp Comp %" style="background-color: #E27336; color: #FFFFFF">66.2670</td>
<td class="gt_row gt_right" headers="CPOE" style="background-color: #FF8C00; color: #000000">2.7416</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The point of going through these three different rankings is to indicate how each group of variables: QB, receiver, and defense, each display variation that we ideally want to account for in a model. This will be the topic of discussion for the next so many lectures.</p>
</section>
<section id="estimating-coefficients-for-qbs" class="level2">
<h2 class="anchored" data-anchor-id="estimating-coefficients-for-qbs">Estimating coefficients for QBs</h2>
<p>As a starting point, we’ll fit another logistic regression model for completion probability but now we’ll account for the QB attempting the pass via a categorical variable to estimate coefficients for each passer (note this will take a slightly longer amount of time to run):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>passer_logit <span class="ot">&lt;-</span> <span class="fu">glm</span>(complete_pass <span class="sc">~</span> pass_location <span class="sc">+</span> air_yards <span class="sc">+</span> qb_hit <span class="sc">+</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>                      passer_name_id,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">data =</span> nfl_passing_data, <span class="at">family =</span> <span class="st">"binomial"</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(passer_logit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = complete_pass ~ pass_location + air_yards + qb_hit + 
    passer_name_id, family = "binomial", data = nfl_passing_data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.2047  -1.1610   0.7084   0.8486   2.4092  

Coefficients:
                                               Estimate Std. Error z value
(Intercept)                                   13.890565 535.411133   0.026
pass_locationmiddle                            0.158477   0.032375   4.895
pass_locationright                            -0.087527   0.026422  -3.313
air_yards                                     -0.059243   0.001213 -48.837
qb_hit                                        -1.085293   0.039252 -27.649
passer_name_idA.Dalton_00-0027973            -12.756376 535.411153  -0.024
passer_name_idA.Lazard_00-0034521            -26.361977 757.185710  -0.035
passer_name_idA.McCarron_00-0031288          -12.585484 535.412306  -0.024
passer_name_idA.Mitchell_00-0039890           -0.679955 757.185711  -0.001
passer_name_idA.O'Connell_00-0038579         -12.798841 535.411140  -0.024
passer_name_idA.Richardson_00-0039164        -13.102355 535.411145  -0.024
passer_name_idA.Rodgers_00-0023459           -12.826538 535.411140  -0.024
passer_name_idA.St. Brown_00-0036963          -0.028285 757.185711   0.000
passer_name_idB.Allen_00-0032434             -13.081262 535.411270  -0.024
passer_name_idB.Anger_00-0029692             -13.600205 535.413021  -0.025
passer_name_idB.Gabbert_00-0027948           -13.235460 535.411257  -0.025
passer_name_idB.Hoyer_00-0026625             -13.221568 535.411227  -0.025
passer_name_idB.Mann_00-0036313                0.414699 757.185710   0.001
passer_name_idB.Mayfield_00-0034855          -12.576821 535.411136  -0.023
passer_name_idB.Nix_00-0039732               -12.658471 535.411141  -0.024
passer_name_idB.Purdy_00-0037834             -12.487777 535.411138  -0.023
passer_name_idB.Rypien_00-0034955            -13.404705 535.411240  -0.025
passer_name_idB.Young_00-0039150             -12.850871 535.411137  -0.024
passer_name_idB.Zappe_00-0038108             -12.971181 535.411150  -0.024
passer_name_idC.Beathard_00-0033936          -12.215626 535.411236  -0.023
passer_name_idC.Godwin_00-0033921            -26.302734 757.185710  -0.035
passer_name_idC.Keenum_00-0028986            -12.803016 535.411216  -0.024
passer_name_idC.Kirk_00-0034775              -13.062503 535.413315  -0.024
passer_name_idC.Rush_00-0033662              -12.893358 535.411145  -0.024
passer_name_idC.Stroud_00-0039163            -12.669463 535.411137  -0.024
passer_name_idC.Sutton_00-0034348              0.355204 648.697971   0.001
passer_name_idC.Tune_00-0038582              -13.095103 535.411316  -0.024
passer_name_idC.Wentz_00-0032950             -12.556132 535.411241  -0.023
passer_name_idC.Williams_00-0039918          -12.769664 535.411140  -0.024
passer_name_idC.Wilson_00-0034418              0.947884 757.185710   0.001
passer_name_idCo.Heyward_00-0037304          -27.606075 757.185710  -0.036
passer_name_idD.Brown_00-0036626             -12.794574 535.413549  -0.024
passer_name_idD.Carr_00-0031280              -12.529190 535.411138  -0.023
passer_name_idD.Henry_00-0032764             -12.628181 535.412580  -0.024
passer_name_idD.Hopkins_00-0030564           -26.430581 757.185712  -0.035
passer_name_idD.Jones_00-0035710             -12.673487 535.411142  -0.024
passer_name_idD.Lock_00-0035704              -12.933044 535.411149  -0.024
passer_name_idD.London_00-0037238              0.386415 757.185711   0.001
passer_name_idD.Maye_00-0039851              -12.632783 535.411146  -0.024
passer_name_idD.Mills_00-0036898             -13.397939 535.411185  -0.025
passer_name_idD.Montgomery_00-0035685         -0.059243 757.185710   0.000
passer_name_idD.Mooney_00-0036309            -25.158198 757.185711  -0.033
passer_name_idD.Moore_00-0034827             -25.414093 757.185711  -0.034
passer_name_idD.Prescott_00-0033077          -12.516723 535.411138  -0.023
passer_name_idD.Ridder_00-0038122            -12.707752 535.411142  -0.024
passer_name_idD.Samuel_00-0035719            -25.632140 757.185711  -0.034
passer_name_idD.Singletary_00-0035250          1.203779 757.185711   0.002
passer_name_idD.Thompson-Robinson_00-0038583 -13.280235 535.411150  -0.025
passer_name_idD.Watson_00-0033537            -12.699020 535.411144  -0.024
passer_name_idD.Wicks_00-0038393               0.296214 757.185710   0.000
passer_name_idE.Stick_00-0035282             -12.780861 535.411158  -0.024
passer_name_idG.Minshew_00-0035289           -12.793448 535.411138  -0.024
passer_name_idG.Smith_00-0030565             -12.554024 535.411137  -0.023
passer_name_idG.Wilson_00-0037740            -26.776676 757.185710  -0.035
passer_name_idH.Hooker_00-0038550            -12.764219 535.411614  -0.024
passer_name_idJ.Allen_00-0034857             -12.605147 535.411137  -0.024
passer_name_idJ.Brissett_00-0033119          -12.795409 535.411157  -0.024
passer_name_idJ.Browning_00-0035100          -12.466457 535.411153  -0.023
passer_name_idJ.Burrow_00-0036442            -12.479120 535.411137  -0.023
passer_name_idJ.Chase_00-0036900              -0.739198 757.185711  -0.001
passer_name_idJ.Coker_00-0039491               0.710913 757.185710   0.001
passer_name_idJ.Daniels_00-0039910           -12.529462 535.411142  -0.023
passer_name_idJ.Dobbs_00-0033949             -12.680533 535.411142  -0.024
passer_name_idJ.Driskel_00-0032436           -13.142576 535.411295  -0.025
passer_name_idJ.Fields_00-0036945            -12.746152 535.411141  -0.024
passer_name_idJ.Flacco_00-0026158            -12.692742 535.411142  -0.024
passer_name_idJ.Fox_00-0035156                 0.405666 757.185711   0.001
passer_name_idJ.Garoppolo_00-0031345         -12.645310 535.411154  -0.024
passer_name_idJ.Goff_00-0033106              -12.480962 535.411137  -0.023
passer_name_idJ.Haener_00-0038998            -13.370829 535.411240  -0.025
passer_name_idJ.Hall_00-0038598              -12.607966 535.411361  -0.024
passer_name_idJ.Hekker_00-0028872            -14.161782 535.412596  -0.026
passer_name_idJ.Herbert_00-0036355           -12.572364 535.411137  -0.023
passer_name_idJ.Hurts_00-0036389             -12.578289 535.411137  -0.023
passer_name_idJ.Jefferson_00-0036322         -12.816070 535.413880  -0.024
passer_name_idJ.Johnson_00-0026300           -11.709013 535.412653  -0.022
passer_name_idJ.Love_00-0036264              -12.667203 535.411137  -0.024
passer_name_idJ.McKinnon_00-0031376           -0.660704 757.185711  -0.001
passer_name_idJ.Meyers_00-0034960            -12.864965 535.412549  -0.024
passer_name_idJ.Milton_00-0039398            -11.960663 535.411326  -0.022
passer_name_idJ.Mixon_00-0033897             -26.776676 757.185710  -0.035
passer_name_idJ.Reeves-Maybin_00-0033557       1.066370 757.185710   0.001
passer_name_idJ.Scott_00-0034162              -0.473942 757.185710  -0.001
passer_name_idJ.Smith_00-0033858             -26.954405 757.185710  -0.036
passer_name_idJ.Smith-Njigba_00-0038543        2.921819 757.185712   0.004
passer_name_idJ.Stidham_00-0035264           -12.791442 535.411201  -0.024
passer_name_idJ.Winston_00-0031503           -12.807717 535.411145  -0.024
passer_name_idK.Allen_00-0030279             -13.456050 535.412545  -0.025
passer_name_idK.Allen_00-0034577               0.287180 757.185711   0.000
passer_name_idK.Bourne_00-0033307            -27.369104 757.185710  -0.036
passer_name_idK.Cousins_00-0029604           -12.477423 535.411139  -0.023
passer_name_idK.Gainwell_00-0036919            0.682629 757.185711   0.001
passer_name_idK.Murray_00-0035228            -12.632661 535.411138  -0.024
passer_name_idK.Pickett_00-0038102           -12.813749 535.411144  -0.024
passer_name_idK.Toney_00-0036913             -26.421220 757.185710  -0.035
passer_name_idK.Trask_00-0036928             -13.846801 535.413023  -0.026
passer_name_idL.Cooke_00-0034437              -0.087527 757.185711   0.000
passer_name_idL.Jackson_00-0034796           -12.534336 535.411137  -0.023
passer_name_idL.Woodside_00-0034438          -12.372938 535.412433  -0.023
passer_name_idM.Jones_00-0036972             -12.730917 535.411140  -0.024
passer_name_idM.Killebrew_00-0032399         -26.627233 757.185711  -0.035
passer_name_idM.Mariota_00-0032268           -12.177335 535.411213  -0.023
passer_name_idM.Nabers_00-0039337            -27.309861 757.185710  -0.036
passer_name_idM.Penix_00-0039917             -12.864351 535.411173  -0.024
passer_name_idM.Rudolph_00-0034771           -12.612450 535.411148  -0.024
passer_name_idM.Stafford_00-0026498          -12.691916 535.411137  -0.024
passer_name_idM.Trubisky_00-0033869          -12.608433 535.411168  -0.024
passer_name_idM.White_00-0034401             -13.557147 535.411388  -0.025
passer_name_idM.Willis_00-0038128            -12.169524 535.411227  -0.023
passer_name_idN.Mullens_00-0033319           -12.252149 535.411165  -0.023
passer_name_idP.Mahomes_00-0033873           -12.588532 535.411136  -0.024
passer_name_idP.Walker_00-0033275            -13.256732 535.411170  -0.025
passer_name_idR.Dixon_00-0032943              -0.779189 757.185711  -0.001
passer_name_idR.Pearsall_00-0039916          -26.776676 757.185710  -0.035
passer_name_idR.Tannehill_00-0029701         -12.556541 535.411153  -0.023
passer_name_idR.Wilson_00-0029263            -12.574812 535.411138  -0.023
passer_name_idS.Clifford_00-0038391            1.531279 757.185712   0.002
passer_name_idS.Darnold_00-0034869           -12.577759 535.411140  -0.023
passer_name_idS.Diggs_00-0031588              -0.473942 757.185710  -0.001
passer_name_idS.Howell_00-0037077            -12.789672 535.411139  -0.024
passer_name_idS.Rattler_00-0039376           -13.025311 535.411151  -0.024
passer_name_idS.Thompson_00-0037327          -12.645821 535.411265  -0.024
passer_name_idT.Atwell_00-0036849            -25.354850 757.185711  -0.033
passer_name_idT.Bagent_00-0038416            -12.767563 535.411164  -0.024
passer_name_idT.Boyd_00-0033009              -27.029112 630.160400  -0.043
passer_name_idT.Boyle_00-0034177             -13.008536 535.411167  -0.024
passer_name_idT.DeVito_00-0038476            -12.758477 535.411152  -0.024
passer_name_idT.Heinicke_00-0031800          -13.073210 535.411163  -0.024
passer_name_idT.Hill_00-0033357              -12.973565 535.411426  -0.024
passer_name_idT.Huntley_00-0035993           -12.729958 535.411158  -0.024
passer_name_idT.Lance_00-0037012             -12.987293 535.411237  -0.024
passer_name_idT.Lawrence_00-0036971          -12.686691 535.411138  -0.024
passer_name_idT.McKee_00-0038400             -12.608173 535.411231  -0.024
passer_name_idT.Morstead_00-0027114            0.267929 757.185711   0.000
passer_name_idT.Siemian_00-0032156           -13.204427 535.411159  -0.025
passer_name_idT.Tagovailoa_00-0036212        -12.480383 535.411137  -0.023
passer_name_idT.Taylor_00-0028118            -12.484961 535.411157  -0.023
passer_name_idT.Townsend_00-0035889            0.327172 757.185711   0.000
passer_name_idW.Levis_00-0039152             -12.672050 535.411141  -0.024
passer_name_idZ.Wilson_00-0037013            -12.879896 535.411144  -0.024
                                             Pr(&gt;|z|)    
(Intercept)                                  0.979302    
pass_locationmiddle                          9.83e-07 ***
pass_locationright                           0.000924 ***
air_yards                                     &lt; 2e-16 ***
qb_hit                                        &lt; 2e-16 ***
passer_name_idA.Dalton_00-0027973            0.980992    
passer_name_idA.Lazard_00-0034521            0.972227    
passer_name_idA.McCarron_00-0031288          0.981247    
passer_name_idA.Mitchell_00-0039890          0.999283    
passer_name_idA.O'Connell_00-0038579         0.980929    
passer_name_idA.Richardson_00-0039164        0.980476    
passer_name_idA.Rodgers_00-0023459           0.980887    
passer_name_idA.St. Brown_00-0036963         0.999970    
passer_name_idB.Allen_00-0032434             0.980508    
passer_name_idB.Anger_00-0029692             0.979735    
passer_name_idB.Gabbert_00-0027948           0.980278    
passer_name_idB.Hoyer_00-0026625             0.980299    
passer_name_idB.Mann_00-0036313              0.999563    
passer_name_idB.Mayfield_00-0034855          0.981259    
passer_name_idB.Nix_00-0039732               0.981138    
passer_name_idB.Purdy_00-0037834             0.981392    
passer_name_idB.Rypien_00-0034955            0.980026    
passer_name_idB.Young_00-0039150             0.980851    
passer_name_idB.Zappe_00-0038108             0.980672    
passer_name_idC.Beathard_00-0033936          0.981798    
passer_name_idC.Godwin_00-0033921            0.972289    
passer_name_idC.Keenum_00-0028986            0.980922    
passer_name_idC.Kirk_00-0034775              0.980536    
passer_name_idC.Rush_00-0033662              0.980788    
passer_name_idC.Stroud_00-0039163            0.981121    
passer_name_idC.Sutton_00-0034348            0.999563    
passer_name_idC.Tune_00-0038582              0.980487    
passer_name_idC.Wentz_00-0032950             0.981290    
passer_name_idC.Williams_00-0039918          0.980972    
passer_name_idC.Wilson_00-0034418            0.999001    
passer_name_idCo.Heyward_00-0037304          0.970917    
passer_name_idD.Brown_00-0036626             0.980935    
passer_name_idD.Carr_00-0031280              0.981330    
passer_name_idD.Henry_00-0032764             0.981183    
passer_name_idD.Hopkins_00-0030564           0.972154    
passer_name_idD.Jones_00-0035710             0.981115    
passer_name_idD.Lock_00-0035704              0.980729    
passer_name_idD.London_00-0037238            0.999593    
passer_name_idD.Maye_00-0039851              0.981176    
passer_name_idD.Mills_00-0036898             0.980036    
passer_name_idD.Montgomery_00-0035685        0.999938    
passer_name_idD.Mooney_00-0036309            0.973494    
passer_name_idD.Moore_00-0034827             0.973225    
passer_name_idD.Prescott_00-0033077          0.981349    
passer_name_idD.Ridder_00-0038122            0.981064    
passer_name_idD.Samuel_00-0035719            0.972995    
passer_name_idD.Singletary_00-0035250        0.998732    
passer_name_idD.Thompson-Robinson_00-0038583 0.980211    
passer_name_idD.Watson_00-0033537            0.981077    
passer_name_idD.Wicks_00-0038393             0.999688    
passer_name_idE.Stick_00-0035282             0.980955    
passer_name_idG.Minshew_00-0035289           0.980937    
passer_name_idG.Smith_00-0030565             0.981293    
passer_name_idG.Wilson_00-0037740            0.971790    
passer_name_idH.Hooker_00-0038550            0.980980    
passer_name_idJ.Allen_00-0034857             0.981217    
passer_name_idJ.Brissett_00-0033119          0.980934    
passer_name_idJ.Browning_00-0035100          0.981424    
passer_name_idJ.Burrow_00-0036442            0.981405    
passer_name_idJ.Chase_00-0036900             0.999221    
passer_name_idJ.Coker_00-0039491             0.999251    
passer_name_idJ.Daniels_00-0039910           0.981330    
passer_name_idJ.Dobbs_00-0033949             0.981105    
passer_name_idJ.Driskel_00-0032436           0.980417    
passer_name_idJ.Fields_00-0036945            0.981007    
passer_name_idJ.Flacco_00-0026158            0.981087    
passer_name_idJ.Fox_00-0035156               0.999573    
passer_name_idJ.Garoppolo_00-0031345         0.981157    
passer_name_idJ.Goff_00-0033106              0.981402    
passer_name_idJ.Haener_00-0038998            0.980076    
passer_name_idJ.Hall_00-0038598              0.981213    
passer_name_idJ.Hekker_00-0028872            0.978898    
passer_name_idJ.Herbert_00-0036355           0.981266    
passer_name_idJ.Hurts_00-0036389             0.981257    
passer_name_idJ.Jefferson_00-0036322         0.980903    
passer_name_idJ.Johnson_00-0026300           0.982552    
passer_name_idJ.Love_00-0036264              0.981125    
passer_name_idJ.McKinnon_00-0031376          0.999304    
passer_name_idJ.Meyers_00-0034960            0.980830    
passer_name_idJ.Milton_00-0039398            0.982177    
passer_name_idJ.Mixon_00-0033897             0.971790    
passer_name_idJ.Reeves-Maybin_00-0033557     0.998876    
passer_name_idJ.Scott_00-0034162             0.999501    
passer_name_idJ.Smith_00-0033858             0.971603    
passer_name_idJ.Smith-Njigba_00-0038543      0.996921    
passer_name_idJ.Stidham_00-0035264           0.980940    
passer_name_idJ.Winston_00-0031503           0.980915    
passer_name_idK.Allen_00-0030279             0.979950    
passer_name_idK.Allen_00-0034577             0.999697    
passer_name_idK.Bourne_00-0033307            0.971166    
passer_name_idK.Cousins_00-0029604           0.981407    
passer_name_idK.Gainwell_00-0036919          0.999281    
passer_name_idK.Murray_00-0035228            0.981176    
passer_name_idK.Pickett_00-0038102           0.980906    
passer_name_idK.Toney_00-0036913             0.972164    
passer_name_idK.Trask_00-0036928             0.979367    
passer_name_idL.Cooke_00-0034437             0.999908    
passer_name_idL.Jackson_00-0034796           0.981323    
passer_name_idL.Woodside_00-0034438          0.981563    
passer_name_idM.Jones_00-0036972             0.981030    
passer_name_idM.Killebrew_00-0032399         0.971947    
passer_name_idM.Mariota_00-0032268           0.981855    
passer_name_idM.Nabers_00-0039337            0.971228    
passer_name_idM.Penix_00-0039917             0.980831    
passer_name_idM.Rudolph_00-0034771           0.981206    
passer_name_idM.Stafford_00-0026498          0.981088    
passer_name_idM.Trubisky_00-0033869          0.981212    
passer_name_idM.White_00-0034401             0.979799    
passer_name_idM.Willis_00-0038128            0.981866    
passer_name_idN.Mullens_00-0033319           0.981743    
passer_name_idP.Mahomes_00-0033873           0.981242    
passer_name_idP.Walker_00-0033275            0.980246    
passer_name_idR.Dixon_00-0032943             0.999179    
passer_name_idR.Pearsall_00-0039916          0.971790    
passer_name_idR.Tannehill_00-0029701         0.981290    
passer_name_idR.Wilson_00-0029263            0.981262    
passer_name_idS.Clifford_00-0038391          0.998386    
passer_name_idS.Darnold_00-0034869           0.981258    
passer_name_idS.Diggs_00-0031588             0.999501    
passer_name_idS.Howell_00-0037077            0.980942    
passer_name_idS.Rattler_00-0039376           0.980591    
passer_name_idS.Thompson_00-0037327          0.981157    
passer_name_idT.Atwell_00-0036849            0.973287    
passer_name_idT.Bagent_00-0038416            0.980975    
passer_name_idT.Boyd_00-0033009              0.965787    
passer_name_idT.Boyle_00-0034177             0.980616    
passer_name_idT.DeVito_00-0038476            0.980989    
passer_name_idT.Heinicke_00-0031800          0.980520    
passer_name_idT.Hill_00-0033357              0.980668    
passer_name_idT.Huntley_00-0035993           0.981031    
passer_name_idT.Lance_00-0037012             0.980648    
passer_name_idT.Lawrence_00-0036971          0.981096    
passer_name_idT.McKee_00-0038400             0.981213    
passer_name_idT.Morstead_00-0027114          0.999718    
passer_name_idT.Siemian_00-0032156           0.980324    
passer_name_idT.Tagovailoa_00-0036212        0.981403    
passer_name_idT.Taylor_00-0028118            0.981396    
passer_name_idT.Townsend_00-0035889          0.999655    
passer_name_idW.Levis_00-0039152             0.981118    
passer_name_idZ.Wilson_00-0037013            0.980808    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 46543  on 35986  degrees of freedom
Residual deviance: 42623  on 35842  degrees of freedom
AIC: 42913

Number of Fisher Scoring iterations: 12</code></pre>
</div>
</div>
<p>Obviously there are many more coefficients displayed in the summary output, with a number of players that I’ve never heard of before that seem to have rather large coefficient estimates… likely due to limited sample size (more on that in the lectures ahead).</p>
<p>We can examine what the distribution of the coefficients looks like using the <code>tidy()</code> function from the <a href="https://broom.tidymodels.org/index.html"><code>broom</code></a> package which helps grab relevant model output and puts it in a tidy table:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the model coefficients:</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>logit_coef_table <span class="ot">&lt;-</span> <span class="fu">tidy</span>(passer_logit)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Only display the estimates for the passer_name_id coefficients:</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>logit_coef_table <span class="sc">|&gt;</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(term, <span class="st">"passer_name_id"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> estimate)) <span class="sc">+</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Passer coefficient estimate"</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>) <span class="sc">+</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04b-cpoe_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>And if we focus on the middle portion of the distribution:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>logit_coef_table <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(term, <span class="st">"passer_name_id"</span>),</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>         estimate <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">10</span>, estimate <span class="sc">&gt;</span> <span class="sc">-</span><span class="dv">15</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> estimate)) <span class="sc">+</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Passer coefficient estimate"</span>,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>) <span class="sc">+</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="04b-cpoe_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This suggests we can model the QB coefficients according to a distribution! And that leads us into the next lecture’s material…</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/ryurko\.github\.io\/cmu-sportsanalytics-spring25\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>